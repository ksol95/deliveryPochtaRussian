(()=>{"use strict";var e="https://delivery.pochta.ru/",n="v2/calculate/tariff/delivery",t=function(e){return e.ok?e.json():Promise.reject(e.status)},o=function(o){var c=new URLSearchParams(o);return fetch("".concat(e).concat(n,"?")+c.toString(),{method:"GET"}).then(t)},c=document.querySelector(".response"),r=document.querySelector(".deilvery-info"),i=r.from,a=r.weight,u=r.sumoc,s={json:"",object:"4040",service:"22,38,59",increment:50,to:"445042",from:"352120",weight:"2000",size:"85x18x9",sumoc:"573000"};function l(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}var m=function(){s.weight=a.value,s.sumoc=100*u.value,s.from=i.value,o(s).then((function(e){console.log(e);var n={json:"",object:s.object,service:s.service,to:s.to,from:s.from,weight:s.weight,size:s.size,sumoc:e.sumoc+e.paynds};o(n).then((function(e){console.log(e),c.innerHTML="Загрузка...";var n=10*Math.round((e.paynds/100+s.increment)/10),t=e.delivery.min,o=e.delivery.max,r=s.sumoc/100+n,i=document.createElement("div");i.classList.add("delivery-result"),i.innerHTML="\n            <p>Стоимость доставки: ".concat(l(n)," руб.;</p>\n            <p>Срок доставки: от ").concat(++t," до ").concat(++o," дней;</p>\n            <p>Итого: ").concat(l(r)," руб.;</p>\n            <p>(+ комиссия за денежный перевод через почту России: ").concat(l(Math.round(function(e){return e<=1e4?41.67+e/100*4.17:166.67+e/100*3.33}(r)))," руб.)</p>\n          "),c.innerHTML="",c.append(i)}))})).catch((function(e){console.error(e),c.innerHTML="",c.innerHTML="Ошибка: ".concat(e)}))};r.addEventListener("submit",(function(e){e.preventDefault(),m()})),a.value=s.weight,u.value=s.sumoc/100,i.value=s.from,m()})();